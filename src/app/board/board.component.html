<div class="board-wrapper">
  <!----Hidden Task floating Container---->
  <div #floatingTaskContainer class="floating-task-wrapper">
    <div *ngIf="selectedTask" class="floating-task-container">
      <div class="floating-task-top">
        <div class="floating-task-category">
          <span>{{ selectedTask.category }}</span>
        </div>
        <div (click)="closeTask()" class="floating-close-btn">
          <img src="assets/img/board/close.png" />
        </div>
      </div>
      <div class="floating-task-content">
        <div class="floating-task-title">
          <h1>{{ selectedTask.title }}</h1>
        </div>
        <div class="floating-task-description">
          <h2>{{ selectedTask.description }}</h2>
        </div>
        <div class="floating-task-date">
          <h2>Due date:</h2>
          <span>{{ selectedTask.date }}</span>
        </div>
        <div class="floating-task-prio">
          <h2>Priority:</h2>
          <span>{{ selectedTask.prio }}</span>
        </div>
        <div class="floating-task-assign">
          <h2>Assigned to:</h2>
          <span>{{ selectedTask.assigned }}</span>
        </div>
        <div class="floating-task-subtask">
          <h2>Subtask:</h2>
          <span>{{ selectedTask.subtask }}</span>
        </div>
      </div>
      <div class="floating-task-bottom">
        <div class="floating-task-btn">
          <button
            type="button"
            (click)="deleteTask()"
            class="floating-task-btn-cancel"
          >
            Delete
          </button>
          <button class="floating-task-btn-save">Edit</button>
        </div>
      </div>
    </div>
  </div>
  <!---- End of Hidden Task floating Container---->
  <div class="board-top">
    <div class="search">
      <input type="text" placeholder="Find Task" />
    </div>
    <button class="addtask-btn">
      Add task <img src="assets/img/board/addtask_btn.svg" />
    </button>
  </div>
  <div class="task-category-wrapper">
    <div class="category">
      <div class="headline">
        <h2>To do</h2>
        <img src="assets/img/board/plus button.svg" />
      </div>
      <div
        #toDo
        (drop)="this.DragAndDropService.moveTo('toDo');this.removeHighlight('toDo')"
        (dragover)="
          this.DragAndDropService.allowDrop($event); this.highlight('toDo')"
          (dragleave)="this.removeHighlight('toDo')"
        id="toDo"
        class="task-container"
      >
        <div
          draggable="true"
          (dragstart)="this.DragAndDropService.dragStart(i, 'toDo')"
          (click)="openTask(i, 'toDo')"
          *ngFor="let task of this.TaskArrayService.toDo; let i = index"
          class="single-task"
        >
          <div class="task-category">
            {{ task.category }}
          </div>
          <div class="task-content">
            <div class="task-name">
              {{ task.title }}
            </div>
            <div class="task-description">
              {{ task.description }}
            </div>
          </div>
          <div
            *ngIf="this.TaskArrayService.tasks[i].subtask"
            class="progressbar"
          >
            {{ task.subtask }}
          </div>
          <div class="single-task-bottom">
            <div class="assigned-contacts">{{ task.assigned }}</div>
            <img class="prio" src="assets/img/board/prio_urgent.svg" />
          </div>
        </div>
      </div>
    </div>
    <div class="category">
      <div class="headline">
        <h2>In progress</h2>
        <img src="assets/img/board/plus button.svg" />
      </div>
      <div
        #inProgress
        (drop)="this.DragAndDropService.moveTo('inProgress'); this.removeHighlight('inProgress')"
        (dragover)="
          this.DragAndDropService.allowDrop($event);
          this.highlight('inProgress')"
          (dragleave)="this.removeHighlight('inProgress')"
        class="task-container"
        id="inProgress"
      >
        <div
          draggable="true"
          *ngFor="let task of this.TaskArrayService.inProgress; let i = index"
          (dragstart)="this.DragAndDropService.dragStart(i, 'inProgress')"
          (click)="openTask(i, 'inProgress')"
          class="single-task"
        >
          <div class="task-category">
            {{ task.category }}
          </div>
          <div class="task-content">
            <div class="task-name">
              {{ task.title }}
            </div>
            <div class="task-description">
              {{ task.description }}
            </div>
          </div>
          <div
            *ngIf="this.TaskArrayService.tasks[i].subtask"
            class="progressbar"
          >
            {{ task.subtask }}
          </div>
          <div class="single-task-bottom">
            <div class="assigned-contacts">{{ task.assigned }}</div>
            <img class="prio" src="assets/img/board/prio_urgent.svg" />
          </div>
        </div>
      </div>
    </div>
    <div class="category">
      <div class="headline">
        <h2>Await feedback</h2>
        <img src="assets/img/board/plus button.svg" />
      </div>
      <div
        #awaitFeedback
        (drop)="this.DragAndDropService.moveTo('awaitFeedback'); this.removeHighlight('awaitFeedback')"
        (dragover)="
          this.DragAndDropService.allowDrop($event);
          this.highlight('awaitFeedback')"
          (dragleave)="this.removeHighlight('awaitFeedback')"
        class="task-container"
        id="awaitFeedback"
      >
        <div
          draggable="true"
          *ngFor="
            let task of this.TaskArrayService.awaitFeedback;
            let i = index
          "
          (dragstart)="this.DragAndDropService.dragStart(i, 'awaitFeedback')"
          (click)="openTask(i, 'awaitFeedback')"
          class="single-task"
        >
          <div class="task-category">
            {{ task.category }}
          </div>
          <div class="task-content">
            <div class="task-name">
              {{ task.title }}
            </div>
            <div class="task-description">
              {{ task.description }}
            </div>
          </div>
          <div
            *ngIf="this.TaskArrayService.tasks[i].subtask"
            class="progressbar"
          >
            {{ task.subtask }}
          </div>
          <div class="single-task-bottom">
            <div class="assigned-contacts">{{ task.assigned }}</div>
            <img class="prio" src="assets/img/board/prio_urgent.svg" />
          </div>
        </div>
      </div>
    </div>
    <div class="category">
      <div class="headline">
        <h2>Done</h2>
        <img src="assets/img/board/plus button.svg" />
      </div>
      <div
        #done
        (drop)="this.DragAndDropService.moveTo('done'); this.removeHighlight('done')"
        (dragover)="
          this.DragAndDropService.allowDrop($event); this.highlight('done')"
        (dragleave)="this.removeHighlight('done')"
        class="task-container"
        id="done"
      >
        <div
          draggable="true"
          *ngFor="let task of this.TaskArrayService.done; let i = index"
          (dragstart)="this.DragAndDropService.dragStart(i, 'done')"
          (click)="openTask(i, 'done')"
          class="single-task"
        >
          <div class="task-category">
            {{ task.category }}
          </div>
          <div class="task-content">
            <div class="task-name">
              {{ task.title }}
            </div>
            <div class="task-description">
              {{ task.description }}
            </div>
          </div>
          <div
            *ngIf="this.TaskArrayService.tasks[i].subtask"
            class="progressbar"
          >
            {{ task.subtask }}
          </div>
          <div class="single-task-bottom">
            <div class="assigned-contacts">{{ task.assigned }}</div>
            <img class="prio" src="assets/img/board/prio_urgent.svg" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
